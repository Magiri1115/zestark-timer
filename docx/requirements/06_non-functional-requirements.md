# 非機能要件書
## 時刻の精度
| 項目   | 方針                    |
| ---- | --------------------- |
| 記録精度 | 秒単位                   |
| 表示   | 分単位（切り捨て or 四捨五入はUI側） |
| 理由   | 分析・集計用途でミリ秒精度は不要      |
## 自動終了の保証
| 項目      | 方針               |
| ------- | ---------------- |
| 自動終了の遅延 | 最大 ±1分は許容        |
| 実行方式    | バックグラウンドジョブ      |
| 二重終了    | 既に ended なら何もしない |
## データ欠損時の復旧
| ケース       | 復旧方針                                 |
| --------- | ------------------------------------ |
| Event欠損   | Sessionの started_at / ended_at から再計算 |
| paused欠損  | paused は無かったものとして扱う                  |
| Session欠損 | 復旧不可（論理破綻）                           |
## 合計時間の算出
1. 集計対象
TaskSession.actual_duration_minutes の合計
2. 条件
・ended 状態の Session のみ
・日付は ended_at 基準
