# 開発規約
## 目的
これはチーム全員が同じルールで作業できるようにするための指針をまとめたものです。
## コード規約
### 命名規則
可読性・検索性・統一性を保証。
| 対象          | 明記すべきこと                        | 例                            |
| ----------- | ------------------------------ | ----------------------------------- |
| クラス名        |単一責任が分かる名前      | `TaskService`, `TaskController`     |
| メソッド名       |動詞＋対象           | `createTask()`, `startTimer()`      |
| 変数名         |用途が分かる短く意味のある名前 | `taskList`, `elapsedTime`           |
| 定数          |変更不可を明示       | `MAX_TASK_COUNT`                    |
| ファイル名       | クラス名と一致、拡張子含む | `TaskService.java`, `TaskTimer.tsx` |
| フロントコンポーネント | 部品が分かるような名前 | `TaskTimerButton.tsx`               |
### コード規約
フォーマットと可読性の統一が目的。
| 項目                | 明記内容                     | 例・ツール                           |
| ----------------- | ------------------------ | ------------------------------- |
| インデント             | スペース4、タブ禁止               | Java / TS 共通                    |
| 改行                | メソッド間は1行空ける、クラス間は2行空ける   |                                 |
| 波括弧               | K&Rスタイル、条件式の波括弧省略禁止      | `if(condition) { ... }`         |
| 行長                | 1行最大100文字                |                                 |
| ESLint / Prettier | プロジェクト共通設定ファイルを必ず使用      | `.eslintrc.json`, `.prettierrc` |
| コメント              | クラス・メソッド必須、複雑処理は行内コメントも可 | Javadoc/TSDoc                   |
| 空白・余計な改行          | 不要な空白・改行禁止               |                                 |
### 関数・クラス設計
責任分離と保守性が目的。
| 項目     | 明記内容                            | 例                                |
| ------ | ------------------------------- | -------------------------------- |
| 単一責任   | クラス・関数は一つの責務に限定     | `TaskService` はタスク処理のみ           |
| メソッド長  | 1メソッドは20〜30行以内                  | 長すぎる場合は分割                        |
| 公開範囲   | 不要に public にしない                 | private / protected を使い分け        |
| 引数・戻り値 | 数を最小限、意味のある型                    | `createTask(name: string): Task` |
| 再利用性   | 共通処理はユーティリティに切り出す               | `DateUtils.formatElapsedTime()`  |
| 非同期処理  | Promise / CompletableFuture の統一 | エラーハンドリングルールも明示                  |
### テスト
関数の粒度と種類の統一が目的。
| 項目        | 明記内容                                  | 例                                  |
| --------- | ------------------------------------- | ---------------------------------- |
| 単体テスト     | すべてのサービス・関数に必須  | `TaskServiceTest`     |
| 結合テスト     | Controller → Service → Repository の流れ | `TaskControllerIntegrationTest`    |
| フロント単体テスト | コンポーネント・ユーティリティ必須      | Jest + RTL    |
| E2Eテスト    | ページ遷移・API連携確認  | Cypress         |
| カバレッジ     | 最低80%目標     | Jacoco / Jest         |
| ネーミング     | テストメソッド名に挙動を明記  | `createTask_shouldReturnSavedTask` |
| モック       | 外部依存は基本モック化   | Mockito / MSW    |
### ライブラリ使用
| 項目      | 明記内容                       | 例                                |
| ------- | -------------------------- | -------------------------------- |
| 公式サポート  | メンテされているライブラリを使用 | React, Spring Boot, Axios, JUnit |
| バージョン管理 | package.json / pom.xml で固定 | 依存関係の更新手順明示       |
| セキュリティ  | 既知脆弱性のライブラリ禁止              | Dependabot 等でチェック   |
| 再利用性    | 共通ライブラリは lib/ に統一          | 日付計算や API クライアントなど   |
## ブランチ運用・CD/CI
### ブランチモデル
| ブランチ        | 用途           | 例                        |
| ----------- | ------------ | ------------------------ |
| `main`      | 本番用、常にデプロイ可能 | -                        |
| `develop`   | 開発統合用        | -                        |
| `feature/*` | 個別機能開発       | `feature/task-timer`     |
| `hotfix/*`  | 緊急修正         | `hotfix/fix-login-error` |
| `release/*` | リリース準備（バージョン更新用ブランチ）| -  |
### コミットメッセージ
変更意図を記述すること。
```
feat: タスク作成APIのバリデーション追加
fix: タイマー停止時のエラー修正
docs: READMEにセットアップ手順を追加
```
### プルリクエスト・マージ
・「何も変更しない状態」で作成し、レビュー承認後にマージする。
### マージ方法
Gitコマンドで履歴を整理してマージすること。
例）「featureブランチの変更をdevelopに付け替え・統合してリモートに反映する操作」
```
git checkout develop
git pull origin develop
git checkout feature/task-timer
git rebase develop
git checkout develop
git merge feature/task-timer
git push origin develop
```
### CI/CD
1. プッシュ時に自動ビルドを実行。
・バックエンド: Maven / Gradle
・フロントエンド: npm run build
2. 単体テスト・結合テスト・E2Eテストを自動実行し、カバレッジは80%以上を目標とする。
3. Lintチェック・セキュリティチェックは必須。
・develop ブランチ → ステージング環境、自動デプロイ
・main ブランチ → 本番環境、自動デプロイ
4. 必要に応じて手動確認のチェックリストを作成して運用する。
